package com.sascom.chickenstock.account.domain; import jakarta.persistence.*; import lombok.*; @Entity @Table(name="pre_reserve") @Getter @Setter @NoArgsConstructor public class PreReserve { @Id @GeneratedValue(strategy=GenerationType.IDENTITY) private Long id; private Long orderId; private Long accountId; private Long companyId; private Long reservedLeft=0L; private Long borrowedLeft=0L; public static PreReserve of(Long orderId, Long accountId, Long companyId, long reserved, long borrowed){ PreReserve p=new PreReserve(); p.orderId=orderId; p.accountId=accountId; p.companyId=companyId; p.reservedLeft=reserved; p.borrowedLeft=borrowed; return p; } public long consumeReserved(long a){ long c=Math.min(reservedLeft,a); reservedLeft-=c; return c; } public long consumeBorrowed(long a){ long c=Math.min(borrowedLeft,a); borrowedLeft-=c; return c; } }